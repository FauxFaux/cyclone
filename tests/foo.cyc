#include <core.h>
#include <stdio.h>
#include "foo_tab.h"

int c = (int)' ';

datatype exn {ParseError};

void yyerror(string_t s) {
  printf("error: %s\n",s);
  throw ParseError;
}

int yylex() {
  if (c == EOF) return -1;
  while (c == ' ' || c == '\n' || c == '\t') c = fgetc(stdin);
  if (c >= (int)'0' && c <= (int)'9') {
    int i = c - ((int)'0');
    c = fgetc(stdin);
    while (c >= (int)'0' && c <= (int)'9') {
      i = i*10 + (c - ((int)'0'));
      c = fgetc(stdin);
    }
    yylval = YYSTYPE{.Integer = i};
    return INT;
  } else {
    int old_c = c;
    c = fgetc(stdin);
    return old_c;
  }
}

int main() {
  yyparse();
  return 0;
}
